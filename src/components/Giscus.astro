---
// src/components/Giscus.astro
interface Props {
  repo: string;
  repoId: string;
  category?: string;
  categoryId?: string;
  mapping?: 'pathname' | 'url' | 'title' | 'og:title';
  reactionsEnabled?: boolean;
  emitMetadata?: boolean;
  inputPosition?: 'top' | 'bottom';
  lang?: string;
  loading?: 'eager' | 'lazy';
  theme?: 'light' | 'dark' | 'transparent_dark' | 'preferred_color_scheme';
}

const {
  repo,
  repoId,
  category = 'General',
  categoryId,
  mapping = 'pathname',
  reactionsEnabled = true,
  emitMetadata = false,
  inputPosition = 'bottom',
  lang = 'en',
  loading = 'lazy',
  theme = 'preferred_color_scheme'
} = Astro.props;
---

<div class="giscus-wrapper">
  <div
    id="giscus"
    style="width: 100%; max-width: 720px; margin: 0 auto; padding: 2rem 0;"
  ></div>
  
  <script
    src="https://giscus.app/client.js"
    data-repo={repo}
    data-repo-id={repoId}
    data-category={category}
    data-category-id={categoryId}
    data-mapping={mapping}
    data-strict="0"
    data-reactions-enabled={reactionsEnabled ? '1' : '0'}
    data-emit-metadata={emitMetadata ? '1' : '0'}
    data-input-position={inputPosition}
    data-theme={theme}
    data-lang={lang}
    data-loading={loading}
    crossorigin="anonymous"
    async
  ></script>
</div>

<style>
  .giscus-wrapper {
    width: 100%;
    margin: 2rem auto;
  }
</style>
